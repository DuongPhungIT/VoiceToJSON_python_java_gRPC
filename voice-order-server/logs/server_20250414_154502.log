2025-04-14 15:45:02,391 - INFO - Starting gRPC server...
2025-04-14 15:45:02,397 - INFO - Server started on port 50051
2025-04-14 15:45:08,355 - INFO - Received connection from client: ipv4:127.0.0.1:61182
2025-04-14 15:45:08,356 - INFO - Audio data length: 30292 bytes
2025-04-14 15:45:08,360 - INFO - Audio data length: 30292 bytes
2025-04-14 15:45:08,361 - INFO - Saved audio data to temp_audio.webm
2025-04-14 15:45:08,361 - INFO - Starting audio conversion
2025-04-14 15:45:08,362 - INFO - Saved input audio to: /var/folders/w6/8kx_1b2s1fq3c1gwx448gz040000gn/T/tmpocjn46ae.webm
2025-04-14 15:45:08,363 - INFO - Output WAV will be saved to: /var/folders/w6/8kx_1b2s1fq3c1gwx448gz040000gn/T/tmpocjn46ae.wav
2025-04-14 15:45:08,363 - INFO - Running ffmpeg command: ffmpeg -i /var/folders/w6/8kx_1b2s1fq3c1gwx448gz040000gn/T/tmpocjn46ae.webm -acodec pcm_s16le -ar 16000 -ac 1 -y /var/folders/w6/8kx_1b2s1fq3c1gwx448gz040000gn/T/tmpocjn46ae.wav
2025-04-14 15:45:08,563 - INFO - Successfully converted to WAV format, length: 59598 bytes
2025-04-14 15:45:08,563 - INFO - Converted to WAV format, length: 59598 bytes
2025-04-14 15:45:08,563 - INFO - Saved WAV data to temp_audio.wav
2025-04-14 15:45:08,563 - INFO - Starting speech recognition
2025-04-14 15:45:08,563 - INFO - Audio data type: <class 'bytes'>
2025-04-14 15:45:08,564 - INFO - Audio data length: 59598 bytes
2025-04-14 15:45:08,564 - INFO - Saved audio data to debug_audio.wav for inspection
2025-04-14 15:45:08,564 - INFO - Adjusting for ambient noise...
2025-04-14 15:45:08,564 - INFO - Recording audio...
2025-04-14 15:45:08,564 - INFO - Audio recorded successfully
2025-04-14 15:45:08,564 - INFO - Recognizing speech...
2025-04-14 15:45:09,241 - INFO - Speech recognition completed with Vietnamese: 'bánh bao một cái'
2025-04-14 15:45:09,242 - INFO - Converted audio to text: 'bánh bao một cái'
2025-04-14 15:45:09,242 - INFO - Processing order text: 'bánh bao một cái'
2025-04-14 15:45:10,675 - INFO - Received response from Gemini: ```json
{
    "products": [],
    "productsError": [
        {
            "name": "bánh bao",
            "quantity": 1
        }
    ]
}
```
2025-04-14 15:45:10,676 - ERROR - Failed to parse Gemini response as JSON: ```json
{
    "products": [],
    "productsError": [
        {
            "name": "bánh bao",
            "quantity": 1
        }
    ]
}
```
2025-04-14 15:45:10,676 - INFO - Using fallback method to process order text: 'bánh bao một cái'
2025-04-14 15:45:10,676 - INFO - Split text into words: ['bánh', 'bao', 'một', 'cái']
2025-04-14 15:45:10,676 - INFO - Fallback order processing completed - Products: [], Errors: []
2025-04-14 15:45:10,676 - INFO - Processed order - Products: [], Errors: []
