2025-04-14 12:04:29,933 - INFO - Starting gRPC server...
2025-04-14 12:04:29,940 - INFO - VoiceServiceServicer initialized with menu: {'coca cola': '1001', 'pepsi': '1002', '7up': '1003', 'fanta': '1004', 'sprite': '1005', 'mirinda': '1006', 'sting': '1007', 'number one': '1008', 'revive': '1009', 'tiger': '1010', 'heineken': '1011', 'saigon': '1012', '333': '1013', 'huda': '1014', 'larue': '1015', 'hanoi': '1016', 'bia hơi': '1017', 'bia tươi': '1017', 'bia đen': '1018', 'bia nâu': '1019', 'bia đỏ': '1020', 'bia vàng': '1021', 'bia trắng': '1022', 'bia xanh': '1023', 'bia tím': '1024', 'bia hồng': '1025', 'bia cam': '1026', 'bia lục': '1027', 'bia lam': '1028', 'bia chai': '1029', 'bia lon': '1030', 'bia thùng': '1031', 'bia két': '1032', 'bia bock': '1033', 'bia pilsner': '1034', 'bia lager': '1035', 'bia ale': '1036', 'bia stout': '1037', 'bia porter': '1038', 'bia wheat': '1039', 'bia ipa': '1040', 'bia apa': '1050'}
2025-04-14 12:04:29,944 - INFO - Server started on port 50051
2025-04-14 12:05:08,798 - INFO - Received connection from client: ipv4:127.0.0.1:65357
2025-04-14 12:05:08,799 - INFO - Audio data length: 22520 bytes
2025-04-14 12:05:08,799 - INFO - Audio data length: 22520 bytes
2025-04-14 12:05:08,800 - INFO - Saved audio data to temp_audio.webm
2025-04-14 12:05:08,800 - INFO - Starting audio conversion
2025-04-14 12:05:08,800 - INFO - Audio conversion completed successfully
2025-04-14 12:05:08,800 - INFO - Converted to WAV format, length: 22564 bytes
2025-04-14 12:05:08,800 - INFO - Saved WAV data to temp_audio.wav
2025-04-14 12:05:08,800 - INFO - Starting speech recognition
2025-04-14 12:05:09,421 - ERROR - Error in speech recognition: 
Traceback (most recent call last):
  File "/Users/phungduong/Documents/Kido Documents/python/VoiceToJSON_python_java_gRPC/voice-order-server/server.py", line 180, in audio_to_text
    text = self.recognizer.recognize_google(audio, language="vi-VN")
  File "/Users/phungduong/.pyenv/versions/3.9.5/lib/python3.9/site-packages/speech_recognition/recognizers/google.py", line 251, in recognize_legacy
    return output_parser.parse(response_text)
  File "/Users/phungduong/.pyenv/versions/3.9.5/lib/python3.9/site-packages/speech_recognition/recognizers/google.py", line 124, in parse
    actual_result = self.convert_to_result(response_text)
  File "/Users/phungduong/.pyenv/versions/3.9.5/lib/python3.9/site-packages/speech_recognition/recognizers/google.py", line 173, in convert_to_result
    raise UnknownValueError()
speech_recognition.exceptions.UnknownValueError
2025-04-14 12:05:09,422 - ERROR - Error processing voice request: 
Traceback (most recent call last):
  File "/Users/phungduong/Documents/Kido Documents/python/VoiceToJSON_python_java_gRPC/voice-order-server/server.py", line 117, in ProcessVoice
    text = self.audio_to_text(wav_data)
  File "/Users/phungduong/Documents/Kido Documents/python/VoiceToJSON_python_java_gRPC/voice-order-server/server.py", line 180, in audio_to_text
    text = self.recognizer.recognize_google(audio, language="vi-VN")
  File "/Users/phungduong/.pyenv/versions/3.9.5/lib/python3.9/site-packages/speech_recognition/recognizers/google.py", line 251, in recognize_legacy
    return output_parser.parse(response_text)
  File "/Users/phungduong/.pyenv/versions/3.9.5/lib/python3.9/site-packages/speech_recognition/recognizers/google.py", line 124, in parse
    actual_result = self.convert_to_result(response_text)
  File "/Users/phungduong/.pyenv/versions/3.9.5/lib/python3.9/site-packages/speech_recognition/recognizers/google.py", line 173, in convert_to_result
    raise UnknownValueError()
speech_recognition.exceptions.UnknownValueError
